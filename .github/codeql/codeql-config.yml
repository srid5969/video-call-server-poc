name: "NestJS CodeQL Config"

disable-default-queries: false

packs:
  # Use officially supported query packs
  - codeql/javascript-queries
  - codeql/typescript-queries

queries:
  # Security queries
  - name: Extended Security Queries
    uses: codeql/javascript-queries/Security
  # Quality queries
  - name: Code Quality Queries
    uses: codeql/javascript-queries/Code Quality
  # Best practices
  - name: Best Practice Queries
    uses: codeql/javascript-queries/Best Practices
  # Custom queries
  - name: Custom NestJS Queries
    uses: ./.github/codeql/custom-queries/*.ql

paths:
  - src
  - test
paths-ignore:
  - node_modules
  - dist
  - coverage
  - '**/*.test.ts'
  - '**/*.spec.ts'
  - '**/*.d.ts'

extraction:
  javascript:
    index:
      typescript: true
      dependencies: true
      frameworks: true

trap:
  javascript:
    runtime: full

security-severity-mapping:
  critical: 9.0
  high: 7.0
  medium: 4.0
  low: 1.0